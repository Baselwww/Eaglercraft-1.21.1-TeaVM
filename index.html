<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description" content="Eaglercraft 1.21.1 test directory HTML page" />
	<meta name="keywords" content="eaglercraft, eaglercraftx, minecraft, 1.21.1" />
	<title>Eaglercraft 1.21.1</title>
	<meta property="og:locale" content="en-US" />
	<meta property="og:type" content="website" />
	<meta property="og:title" content="Eaglercraft 1.21.1" />
	<meta property="og:description" content="test directory HTML page" />
	<link type="image/png" rel="shortcut icon" href="favicon.png" />
</head>
<body style="margin:0;width:100vw;height:100vh;overflow:hidden;" id="game_frame">
	<script type="text/javascript">
		"use strict";
		window.addEventListener("load", () => {
			if(document.location.href.startsWith("file:")) {
				alert("Load This Via HTTP!");
				return;
			}

			// Load the TeaVM build dynamically
			const script = document.createElement("script");
			script.src = "classes.js.teavmbdg"; // make sure this file is in the repo root
			script.onload = () => {
				if (typeof main === "function") main();
				else alert("Game code (classes.js.teavmbdg) did not load!");
			};
			script.onerror = () => alert("Failed to load classes.js.teavmbdg!");
			document.head.appendChild(script);

			const relayId = Math.floor(Math.random() * 3);
			window.eaglercraftOpts = {
				container: "game_frame",
				assetsURI: "assets/",
				localesURI: "lang/",
				worldsDB: "worlds",
				logInvalidCerts: false,
				servers: [],
				relays: [
					{ addr: "wss://relay.deev.is/", comment: "lax1dude relay #1", primary: relayId == 0 },
					{ addr: "wss://relay.lax1dude.net/", comment: "lax1dude relay #2", primary: relayId == 1 },
					{ addr: "wss://relay.shhnowisnottheti.me/", comment: "ayunami relay #1", primary: relayId == 2 }
				]
			};

			const q = new URLSearchParams(window.location.search);
			const s = q.get("server");
			if(s) window.eaglercraftOpts.joinServer = s;
		});
	</script>
</body>
</html>

